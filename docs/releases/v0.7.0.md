# FlatWiki v0.7.0

Release date: 2026-02-21

## Summary

v0.7.0 focuses on comment workflows, moderation controls, security hardening, and admin operability.  
The release adds configurable moderation modes, improves anti-spam protections, hardens upload/search paths, and expands admin tooling for safer day-to-day operations.

## Highlights

- Comment moderation is now fully operational in Admin (`/admin/comments`)
  - Review queue with status filter (`pending`, `approved`, `rejected`, `all`)
  - Bulk actions: approve, reject, delete selected comments
  - Delete all comments of one page
- Configurable moderation policy in Admin
  - `Freigabe n√∂tig (Standard)`
  - `Trusted User automatisch`
  - `Alle automatisch`
  - Trusted user list configurable directly in UI
- Better mention/reply UX in comments
  - `@username` autocomplete in comment textarea
  - Click `@username` in comment text to insert mention directly into the compose box
  - Author mention shortcuts for active users
- E-mail operations centralized in Admin (`/admin/mail`)
  - SMTP config and test-mail action
  - Runtime SMTP credentials and user e-mail fields can be encrypted at rest
- Edit conflict detection improved
  - Timestamp-based conflict checks extended with a content/settings fingerprint token

## Security and hardening

- Upload protection (`/uploads/*`) aligned with auth/public-read access checks
- Endpoint-specific rate limiting added/strengthened
  - comments create/delete
  - uploads
  - user suggest
- Comment anti-spam controls
  - max links per comment
  - max mentions per comment
  - duplicate cooldown and minimum interval policy by role
- Runtime settings writes are now serialized with a mutation lock to prevent concurrent overwrite races

## Admin and operations

- Admin comments screen now includes active moderation mode badge + explanation
- Bulk moderation form handling fixed (no nested-form CSRF confusion)
- Audit log coverage extended for comment create/delete/review and moderation config changes

## Compatibility / migration notes

- No breaking API changes intended for standard UI usage
- Existing comments are normalized on load; status defaults are handled safely
- New runtime comment moderation settings are stored in `data/runtime-settings.json` under `comments`

## Recommended post-release checks

1. Open `/admin/comments` and verify moderation mode + trusted user list
2. Send one SMTP test message in `/admin/mail`
3. Post test comments as trusted/untrusted user and verify expected auto-approval behavior
4. Verify mention click-to-reply flow on article page

## Tag

- `v0.7.0`
